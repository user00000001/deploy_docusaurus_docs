"use strict";(self.webpackChunkdocusaurus_docs=self.webpackChunkdocusaurus_docs||[]).push([[6676],{3331:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>a});var i=t(8101);const l={},s=i.createContext(l);function c(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),i.createElement(s.Provider,{value:n},e.children)}},5e3:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>r});const i=JSON.parse('{"id":"container/k8s/README","title":"k8s\u5f00\u53d1\u73af\u5883\u5b89\u88c5","description":"Linux\u4e0b \u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5","source":"@site/docs/container/k8s/README.md","sourceDirName":"container/k8s","slug":"/container/k8s/","permalink":"/deploy_docusaurus_docs/en/docs/container/k8s/","draft":false,"unlisted":false,"editUrl":"https://github.com/user00000001/docusaurus_docs/tree/master/blog/docs/container/k8s/README.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"k8s\u5404\u7c7b\u53d8\u79cd","permalink":"/deploy_docusaurus_docs/en/docs/category/k8s\u5404\u7c7b\u53d8\u79cd"},"next":{"title":"k3s \u5b89\u88c5\u4f7f\u7528","permalink":"/deploy_docusaurus_docs/en/docs/container/k8s/k3s/"}}');var l=t(5105),s=t(3331);const c={},a="k8s\u5f00\u53d1\u73af\u5883\u5b89\u88c5",d={},r=[{value:"Linux\u4e0b \u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5",id:"linux\u4e0b-\u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5",level:2},{value:"1. minikube\u5b89\u88c5",id:"1-minikube\u5b89\u88c5",level:3},{value:"2. docker\u5b89\u88c5",id:"2-docker\u5b89\u88c5",level:3},{value:"3. podman\u5b89\u88c5",id:"3-podman\u5b89\u88c5",level:3},{value:"minikube \u57fa\u672c\u4f7f\u7528",id:"minikube-\u57fa\u672c\u4f7f\u7528",level:2},{value:"1. minikube \u542f\u52a8\u96c6\u7fa4",id:"1-minikube-\u542f\u52a8\u96c6\u7fa4",level:3},{value:"2. \u67e5\u8be2\u96c6\u7fa4\u72b6\u6001",id:"2-\u67e5\u8be2\u96c6\u7fa4\u72b6\u6001",level:3},{value:"3. \u8fde\u63a5\u5230\u5185\u90e8\u96c6\u7fa4",id:"3-\u8fde\u63a5\u5230\u5185\u90e8\u96c6\u7fa4",level:3},{value:"4. \u505c\u6b62\u96c6\u7fa4",id:"4-\u505c\u6b62\u96c6\u7fa4",level:3},{value:"5. \u5220\u9664\u96c6\u7fa4",id:"5-\u5220\u9664\u96c6\u7fa4",level:3},{value:"6. \u83b7\u53d6\u5bb9\u5668\u73af\u5883",id:"6-\u83b7\u53d6\u5bb9\u5668\u73af\u5883",level:3},{value:"* virtualbox \u865a\u62df\u673a\u8de8\u64cd\u4f5c\u7cfb\u7edf\u5171\u4eab",id:"-virtualbox-\u865a\u62df\u673a\u8de8\u64cd\u4f5c\u7cfb\u7edf\u5171\u4eab",level:3},{value:"\u76f8\u5173\u76ee\u5f55\u8def\u5f84",id:"\u76f8\u5173\u76ee\u5f55\u8def\u5f84",level:4},{value:"\u5728VirtualBox\u5a92\u4ecb\u7ba1\u7406\u754c\u9762\u5185\u5c06\u5bb9\u5668\u865a\u62df\u673a\u7684\u6302\u8f7d\u78c1\u76d8\u91ca\u653e\u6389\uff0c\u5e76\u6ce8\u518c\u52a0\u8f7d\u5171\u4eab\u7684\u78c1\u76d8\uff0c\u5728\u865a\u62df\u673a\u4e0b\u6302\u8f7d\u6ce8\u518c\u597d\u7684\u78c1\u76d8\uff1bLinux\u4e0b\u6700\u597d\u4f7f\u7528\u6587\u4ef6\u7ba1\u7406\u5668\u8986\u76d6\u8bc1\u4e66\u79d8\u94a5\u7b49\u6587\u4ef6\uff0c\u907f\u514d\u6587\u4ef6\u6743\u9650\u4e0d\u7b26\u95ee\u9898\uff1b\u5728VirtualBox\u7f51\u5361\u914d\u7f6e\u91cc\u5c06\u7f51\u5361ip\u548cmac\u5730\u5740\u5185\u5bb9\u8986\u76d6\u4f7f\u4e4b\u4e0e\u865a\u62df\u673a\u5185\u5df2\u6709\u914d\u7f6e\u5339\u914d\uff0c\u4fee\u6539\u76ee\u5f55\u5185\u76f8\u5173ip\u7aef\u53e3\u7b49\u4f7f\u4e4b\u76f8\u7b26",id:"\u5728virtualbox\u5a92\u4ecb\u7ba1\u7406\u754c\u9762\u5185\u5c06\u5bb9\u5668\u865a\u62df\u673a\u7684\u6302\u8f7d\u78c1\u76d8\u91ca\u653e\u6389\u5e76\u6ce8\u518c\u52a0\u8f7d\u5171\u4eab\u7684\u78c1\u76d8\u5728\u865a\u62df\u673a\u4e0b\u6302\u8f7d\u6ce8\u518c\u597d\u7684\u78c1\u76d8linux\u4e0b\u6700\u597d\u4f7f\u7528\u6587\u4ef6\u7ba1\u7406\u5668\u8986\u76d6\u8bc1\u4e66\u79d8\u94a5\u7b49\u6587\u4ef6\u907f\u514d\u6587\u4ef6\u6743\u9650\u4e0d\u7b26\u95ee\u9898\u5728virtualbox\u7f51\u5361\u914d\u7f6e\u91cc\u5c06\u7f51\u5361ip\u548cmac\u5730\u5740\u5185\u5bb9\u8986\u76d6\u4f7f\u4e4b\u4e0e\u865a\u62df\u673a\u5185\u5df2\u6709\u914d\u7f6e\u5339\u914d\u4fee\u6539\u76ee\u5f55\u5185\u76f8\u5173ip\u7aef\u53e3\u7b49\u4f7f\u4e4b\u76f8\u7b26",level:4},{value:"kubectl \u57fa\u672c\u4f7f\u7528",id:"kubectl-\u57fa\u672c\u4f7f\u7528",level:2},{value:"1. \u5e38\u7528\u64cd\u4f5c",id:"1-\u5e38\u7528\u64cd\u4f5c",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"k8s\u5f00\u53d1\u73af\u5883\u5b89\u88c5",children:"k8s\u5f00\u53d1\u73af\u5883\u5b89\u88c5"})}),"\n",(0,l.jsx)(n.h2,{id:"linux\u4e0b-\u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5",children:"Linux\u4e0b \u76f8\u5173\u8f6f\u4ef6\u5b89\u88c5"}),"\n",(0,l.jsx)(n.h3,{id:"1-minikube\u5b89\u88c5",children:"1. minikube\u5b89\u88c5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"**********************!!!PROTECTION POLICY!!!**********************\nWaiting For The Next Deployment, Maybe It Would Be Displayed After That.\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-docker\u5b89\u88c5",children:"2. docker\u5b89\u88c5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"**********************!!!PROTECTION POLICY!!!**********************\nWaiting For The Next Deployment, Maybe It Would Be Displayed After That.\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-podman\u5b89\u88c5",children:"3. podman\u5b89\u88c5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:'sudo apt update\nsudo apt -y  install software-properties-common\nsudo add-apt-repository -y ppa:projectatomic/ppa\nsudo apt -y install podman\n\ncat > /etc/containers/registries.conf << EOF\nunqualified-search-registries = ["docker.io"]\n\n[[registry]]\nprefix = "docker.io"\nlocation = "uyah70su.mirror.aliyuncs.com"\nEOF\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# Debian Unstable/Sid\necho 'deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_Unstable/ /' > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list\ncurl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_Unstable/Release.key | sudo apt-key add -\n\n# Debian Testing\necho 'deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_Testing/ /' > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list\ncurl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_Testing/Release.key | sudo apt-key add -\n\n# Debian 10\necho 'deb http://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_10/ /' > /etc/apt/sources.list.d/devel:kubic:libcontainers:stable.list\ncurl -L https://download.opensuse.org/repositories/devel:/kubic:/libcontainers:/stable/Debian_10/Release.key | sudo apt-key add -\n\nsudo apt-get update -qq\nsudo apt-get -qq -y install podman\n"})}),"\n",(0,l.jsx)(n.h2,{id:"minikube-\u57fa\u672c\u4f7f\u7528",children:"minikube \u57fa\u672c\u4f7f\u7528"}),"\n",(0,l.jsx)(n.h3,{id:"1-minikube-\u542f\u52a8\u96c6\u7fa4",children:"1. minikube \u542f\u52a8\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"**********************!!!PROTECTION POLICY!!!**********************\nWaiting For The Next Deployment, Maybe It Would Be Displayed After That.\n"})}),"\n",(0,l.jsx)(n.h3,{id:"2-\u67e5\u8be2\u96c6\u7fa4\u72b6\u6001",children:"2. \u67e5\u8be2\u96c6\u7fa4\u72b6\u6001"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"minikube status\nminikube dashboard\nminikube addons list\n"})}),"\n",(0,l.jsx)(n.h3,{id:"3-\u8fde\u63a5\u5230\u5185\u90e8\u96c6\u7fa4",children:"3. \u8fde\u63a5\u5230\u5185\u90e8\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"minikube ssh\n# \u5185\u90e8\u96c6\u7fa4\u53ef\u4f7f\u7528docker\u3001podman\u547d\u4ee4\u76f4\u63a5\u7ba1\u7406\u5bb9\u5668\n"})}),"\n",(0,l.jsx)(n.h3,{id:"4-\u505c\u6b62\u96c6\u7fa4",children:"4. \u505c\u6b62\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"minikube stop\n"})}),"\n",(0,l.jsx)(n.h3,{id:"5-\u5220\u9664\u96c6\u7fa4",children:"5. \u5220\u9664\u96c6\u7fa4"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"**********************!!!PROTECTION POLICY!!!**********************\nWaiting For The Next Deployment, Maybe It Would Be Displayed After That.\n"})}),"\n",(0,l.jsx)(n.h3,{id:"6-\u83b7\u53d6\u5bb9\u5668\u73af\u5883",children:"6. \u83b7\u53d6\u5bb9\u5668\u73af\u5883"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"eval $(minikube -p minikube docker-env)\neval $(minikube -p minikube podman-env)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"-virtualbox-\u865a\u62df\u673a\u8de8\u64cd\u4f5c\u7cfb\u7edf\u5171\u4eab",children:"* virtualbox \u865a\u62df\u673a\u8de8\u64cd\u4f5c\u7cfb\u7edf\u5171\u4eab"}),"\n",(0,l.jsx)(n.h4,{id:"\u76f8\u5173\u76ee\u5f55\u8def\u5f84",children:"\u76f8\u5173\u76ee\u5f55\u8def\u5f84"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{style:{textAlign:"left"},children:"\u7cfb\u7edf\u7c7b\u578b"}),(0,l.jsx)(n.th,{children:"minikube\u6d89\u53ca\u914d\u7f6e"}),(0,l.jsx)(n.th,{children:"kubectl\u6d89\u53ca\u914d\u7f6e"}),(0,l.jsx)(n.th,{children:"vbox\u6d89\u53ca\u914d\u7f6e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Linux"}),(0,l.jsx)(n.td,{children:"~/.minikube"}),(0,l.jsx)(n.td,{children:"~/.kube"}),(0,l.jsx)(n.td,{children:"~/.config/VirtualBox"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{style:{textAlign:"left"},children:"Windows"}),(0,l.jsx)(n.td,{children:"~/.minikube"}),(0,l.jsx)(n.td,{children:"~/.kube"}),(0,l.jsx)(n.td,{children:"~/.VirtualBox"})]})]})]}),"\n",(0,l.jsx)(n.h4,{id:"\u5728virtualbox\u5a92\u4ecb\u7ba1\u7406\u754c\u9762\u5185\u5c06\u5bb9\u5668\u865a\u62df\u673a\u7684\u6302\u8f7d\u78c1\u76d8\u91ca\u653e\u6389\u5e76\u6ce8\u518c\u52a0\u8f7d\u5171\u4eab\u7684\u78c1\u76d8\u5728\u865a\u62df\u673a\u4e0b\u6302\u8f7d\u6ce8\u518c\u597d\u7684\u78c1\u76d8linux\u4e0b\u6700\u597d\u4f7f\u7528\u6587\u4ef6\u7ba1\u7406\u5668\u8986\u76d6\u8bc1\u4e66\u79d8\u94a5\u7b49\u6587\u4ef6\u907f\u514d\u6587\u4ef6\u6743\u9650\u4e0d\u7b26\u95ee\u9898\u5728virtualbox\u7f51\u5361\u914d\u7f6e\u91cc\u5c06\u7f51\u5361ip\u548cmac\u5730\u5740\u5185\u5bb9\u8986\u76d6\u4f7f\u4e4b\u4e0e\u865a\u62df\u673a\u5185\u5df2\u6709\u914d\u7f6e\u5339\u914d\u4fee\u6539\u76ee\u5f55\u5185\u76f8\u5173ip\u7aef\u53e3\u7b49\u4f7f\u4e4b\u76f8\u7b26",children:"\u5728VirtualBox\u5a92\u4ecb\u7ba1\u7406\u754c\u9762\u5185\u5c06\u5bb9\u5668\u865a\u62df\u673a\u7684\u6302\u8f7d\u78c1\u76d8\u91ca\u653e\u6389\uff0c\u5e76\u6ce8\u518c\u52a0\u8f7d\u5171\u4eab\u7684\u78c1\u76d8\uff0c\u5728\u865a\u62df\u673a\u4e0b\u6302\u8f7d\u6ce8\u518c\u597d\u7684\u78c1\u76d8\uff1bLinux\u4e0b\u6700\u597d\u4f7f\u7528\u6587\u4ef6\u7ba1\u7406\u5668\u8986\u76d6\u8bc1\u4e66\u79d8\u94a5\u7b49\u6587\u4ef6\uff0c\u907f\u514d\u6587\u4ef6\u6743\u9650\u4e0d\u7b26\u95ee\u9898\uff1b\u5728VirtualBox\u7f51\u5361\u914d\u7f6e\u91cc\u5c06\u7f51\u5361ip\u548cmac\u5730\u5740\u5185\u5bb9\u8986\u76d6\u4f7f\u4e4b\u4e0e\u865a\u62df\u673a\u5185\u5df2\u6709\u914d\u7f6e\u5339\u914d\uff0c\u4fee\u6539\u76ee\u5f55\u5185\u76f8\u5173ip\u7aef\u53e3\u7b49\u4f7f\u4e4b\u76f8\u7b26"}),"\n",(0,l.jsx)(n.h2,{id:"kubectl-\u57fa\u672c\u4f7f\u7528",children:"kubectl \u57fa\u672c\u4f7f\u7528"}),"\n",(0,l.jsx)(n.h3,{id:"1-\u5e38\u7528\u64cd\u4f5c",children:"1. \u5e38\u7528\u64cd\u4f5c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"# minikube kubectl -- get nodes\n# \u53ef\u4f7f\u7528 minikube kubectl -- \u4ee3\u66ff kubectl \u547d\u4ee4\nkubectl get nodes\nkubectl get pods\nkubectl get namespaces\nkubectl create namespace development\nkubectl create namespace qa\nkubectl run nginx --image=nginx:latest --namespace development\nkubectl describe pod nginx -n development\nkubectl get pods --all-namespaces -o wide\nkubectl delete namespaces development qa\nkubectl delete pods nginx-674ff86d-4qjgk\nkubectl get services,deployment -n default\nkubectl get all -n development\nkubectl get services --sort-by=.metedate.name\nkubectl get pods --sort-by='.status.containerStatuses[0].restartCount'\nkubectl describe deployment nginx\nkubectl describe pod nginx\nkubectl describe nodes\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"kubectl config view -o json\nKUBECONFIG=file1:file2 kubectl config view\nkubectl get nodes --server https://xxx.xxx.xxx/ --user myuser --client-certificate my.cert --client-key my.key --insecure-skip-tls-verify\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"kubectl config current-context\nkubectl config get-contexts\nkubectl config use-context mycluster\nkubectl config set-context --current --namespace=dev-frontend\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"kubectl create deployment nginx --image=nginx:latest\nkubectl expose deployment nginx --port=80 --type=NodePort\nkubectl expose pod nginx --port=80 --type=NodePort --name=nginx1 -n default\nkubectl create configmap -h\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"kubectl create -f app-manifest.yaml\nkubectl create -f deployment.yaml -f service.yaml\nkubectl create -f ./webapp\nkubectl create -f https://xxx.xxx.xxx/deployment.yaml\n\ncat <<EOF | kubectl create -f -\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\nspec:\n  containers:\n  - name: nginx\n    image: nginx:latest\n    ports:\n     - containerPort: 80\nEOF\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}}}]);